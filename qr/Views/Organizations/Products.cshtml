@model Guid
@{
    ViewBag.Title = "Index";
}

@(Html.DevExtreme().DataGrid<Core.Products>()
                            .DataSource(d => d.Mvc().Controller("Products")
                            .Key(new string[] { "id", "OrganizationId" })
                            .LoadAction("Get")
                            .UpdateAction("Update")
                            .InsertAction("Insert")
                            .DeleteAction("Delete")
                            .LoadParams(new { organizationId = Model.ToString() })
                            ).Columns(c =>
                            {
                                c.AddFor(o => o.Title).Caption("Название");
                                c.AddFor(o => o.Description).Caption("Описание");
                                c.AddFor(o => o.Price).Caption("Цена");
                                c.AddFor(o => o.OrganizationId).Visible(false);
                            })
                            .Editing(e => e.AllowAdding(true).AllowUpdating(true))
                            .OnRowInserting(@<text> function(e) { e.data.OrganizationId = "@Model.ToString()"; } </text>)
)

